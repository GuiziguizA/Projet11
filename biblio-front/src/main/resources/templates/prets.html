
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://ultraq.net.nz/thymleaf/layout"
	data-layout-decorate="template1">
 
<head>
	<meta charset="UTF-8">
	<script type ="text/javascript" 
	 src="webjars/jquery/2.2.3/jquery.min.js"></script>
  	<script  type ="text/javascript"
  	 src="webjars/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js"></script>
  	<script type="text/javascript"  th:src= "@{js/main.js}"  src="../static/js/main.js"></script>
  	
  	<link rel="stylesheet"
  	href="webjars/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css"/>
</head>
 
<body>
	<div layout:fragment="content">
	<div class="container pt-3">
 <div class="form-group">
 <div class="jumbotron text-center">
 
<h1>Les Prets</h1>
</div>
				
				
					<div>
	<table  class="table table-striped">
		<tr>
					<th scope="col">Livre</th>
				<th scope="col">Statut</th>
					<th scope="col">Date de début </th>
				<th scope="col">Date de fin</th>
					<th scope="col" th:if="${role!='user'} ">Utilisateur</th>
				<th scope="col" 	>Date de rendu</th>
					<th scope="col" 	>Position dans la liste d'attente</th>
						<th scope="col"></th>
					<th scope="col" 	>Date de retour</th>
					<th scope="col" th:if="${role!='user'} "></th>
				
		</tr>
	
			<tr th:each="pret:${prets}" >
				<td th:text="${pret.livre.nom}"></td>
				<td th:text="${pret.statut}"></td>
				<td th:text="${#dates.format(pret.DateDeDebut, 'dd-MM-yyyy')}" ></td>
					<td th:text="${#dates.format(pret.DateDeFin, 'dd-MM-yyyy')}" ></td>
	
	
							
				<td th:text="${#dates.format(pret.DateDeRendu, 'dd-MM-yyyy')}"></td>
				<td th:text="${pret.position}" th:if="${ pret.statut =='enattente'} "></td>
				<td th:text="${#dates.format(pret.livre.DateDeRetour, 'dd-MM-yyyy')}" ></td>
								
					<td><span th:if="${role!='user' and pret.statut !='remis' and pret.statut !='enattente'} "><a th:href="@{/pretstatut/{id}(id=${pret.id})}"th:method="put"><input  type="button"   class="btn btn-primary" value="remettre" /></a></span></td>
						<td><span th:if="${role=='user' and pret.statut =='encours'} "><a th:href="@{/prolongerPret/{id}(id=${pret.id})}"th:method="put"><input  type="button"   class="btn btn-primary" value="prolonger" /></a></span></td>
								<td><a th:href="@{deletePret/{id}(id=${pret.id})}" th:method="get" class="btn btn-danger " >Delete</a></td>
								</tr>
	
	</table>
				<div th:if="${prets.totalPages > 0}" class="pagination"
    th:each="pageNumber : ${pageNumbers}">
    <nav aria-label="...">
  <ul class="pagination pagination-lg">
  <li class="page-item">   <span th:if="${role!='admin' and role!='employe' } "><a th:href="@{/prets(size=${prets.size}, page=${pageNumber-1})}"
        th:text=${pageNumber}
        th:class="${pageNumber==prets.number + 1} ? active"></a></span>
         <span th:if="${role!='user'} "><a th:href="@{/allprets(size=${prets.size}, page=${pageNumber-1})}"
        th:text=${pageNumber}
        th:class="${pageNumber==prets.number + 1} ? active"></a></span>
        </li>
        </ul>
        </nav>
</div>
				
	</div>
			</div>		
					</div>

</div>	

<div class="myForm">
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       <p class="alert alert-danger">Etes-vous sûr de vouloir supprimer ce prêt en Attente</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">annuler</button>
        <a href="" class="btn btn-danger" id="delRef">Ok</a>
      </div>
    </div>
  </div>
</div>
</div>
